$btn-padding-y:         $spacer * .5;
$btn-padding-x:         $spacer;

$btn-padding-y-lg:      $spacer;
$btn-padding-x-lg:      $spacer * 2;

$btn-font-weight:       $font-weight-bold;
$btn-font-size-lg:      $font-size-base * 1.125;
$btn-line-height:       calc(24/18);
$btn-disabled-opacity:  .6;

$btn-border-width:      map-get($border-widths, 1);

$btn-box-shadow:        var(--#{$prefix}btn-shadow-one-spread) rgba($black, var(--#{$prefix}btn-shadow-one-opacity)),
                        var(--#{$prefix}btn-shadow-two-spread) rgba($black, var(--#{$prefix}btn-shadow-two-opacity)),
                        var(--#{$prefix}btn-glow-spread) hsl(from var(--#{$prefix}btn-bg) h s l / var(--#{$prefix}btn-glow-opacity)),
						inset var(--#{$prefix}btn-inner-shadow-spread) hsl(from var(--#{$prefix}btn-inner-shadow-color) h s l / var(--#{$prefix}btn-inner-shadow-opacity)),
						inset 0 0 0 var(--#{$prefix}btn-border-width) rgba($white, .4);
$btn-focus-box-shadow:  $btn-box-shadow;
$btn-active-box-shadow: $btn-box-shadow;

$btn-transition-timing-function:  ease-in-out; 
$btn-transition-time:             .25s;
$btn-transition:                  transform $btn-transition-time $btn-transition-timing-function,
								  background $btn-transition-time $btn-transition-timing-function,
								  color $btn-transition-time $btn-transition-timing-function,
								  box-shadow $btn-transition-time $btn-transition-timing-function;

$btn-hover-bg-shade-amount:       0%;
$btn-hover-bg-tint-amount:        0%;
$btn-hover-border-shade-amount:   0%;
$btn-hover-border-tint-amount:    0%;
$btn-active-bg-shade-amount:      0%;
$btn-active-bg-tint-amount:       0%;
$btn-active-border-shade-amount:  0%;
$btn-active-border-tint-amount:   0%;

@import "bootstrap/scss/buttons";

@property --rotation {
	syntax: "<angle>";
	inherits: false;
	initial-value: 191deg;
}

.btn:not(.btn-link) {
	position: relative;
	
	&::before {
		content: "";
		position: absolute;
		top: 0;
		left: 0;
		height: 100%;
		width: 100%;
		border-radius: var(--#{$prefix}btn-border-radius);
		background: linear-gradient(var(--rotation), rgba($white, 0.00) 0%, $white 50%, rgba($white, 0.00) 100%) border-box;
		border: var(--#{$prefix}btn-border-width) solid transparent;
		mask: /* mask inside the button */
			linear-gradient($black 0 0) padding-box, 
			linear-gradient($black 0 0);
		mask-composite: exclude;
		mix-blend-mode: overlay;
		transition: --rotation .5s;
	}
}

@each $color, $value in $theme-colors {
	
	.btn-#{$color} {
		--#{$prefix}btn-shadow-one-spread: 0 2px 8px 0;
		--#{$prefix}btn-shadow-one-opacity: 0.4;
		--#{$prefix}btn-shadow-two-spread: 0 0 24px 0;
		--#{$prefix}btn-shadow-two-opacity: 0.24;
		--#{$prefix}btn-glow-spread: 0 16px 32px 0;
		--#{$prefix}btn-glow-opacity: 0.16;
		--#{$prefix}btn-inner-shadow-color: #{$white};
		--#{$prefix}btn-inner-shadow-spread: 0 0 24px 0;
		--#{$prefix}btn-inner-shadow-opacity: 0.4;
		border-width: 0;
		border-color: transparent;
		
		&-lg {
			--#{$prefix}btn-border-width: #{map-get($border-widths, 2)};
		}
		
		&:disabled,
		&.disabled {
			box-shadow: $btn-box-shadow;
			opacity: 1;
			background: hsl(from var(--#{$prefix}btn-bg) h s l / #{$btn-disabled-opacity});
			color: hsl(from var(--#{$prefix}btn-color) h s l / #{$btn-disabled-opacity});
		}
		
		&:disabled,
		&:active,
		&.disabled
		&.active {
			--#{$prefix}btn-shadow-one-spread: 0 1px 4px 0;
			--#{$prefix}btn-shadow-one-opacity: 0.48;
			--#{$prefix}btn-shadow-two-spread: 0 0 12px 0;
			--#{$prefix}btn-shadow-two-opacity: 0.32;
			--#{$prefix}btn-glow-opacity: 0.48;
			--#{$prefix}btn-glow-spread: 0 8px 16px 0;
			--#{$prefix}btn-inner-shadow-color: #{$black};
			--#{$prefix}btn-inner-shadow-opacity: 0.2;
			--#{$prefix}btn-icon-color: var(--#{$prefix}btn-color);
			
			&::before {
				--rotation: initial;
			}
		}
		
		&:not(:disabled),
		&:not(.disabled) {
			
			&:hover {
				--#{$prefix}btn-shadow-one-spread: 0 4px 12px 0;
				--#{$prefix}btn-shadow-two-spread: 0 0 16px 0;
				--#{$prefix}btn-glow-spread: 0 12px 24px 0;
				--#{$prefix}btn-glow-opacity: 0.32;
				--#{$prefix}btn-inner-shadow-opacity: 0.64;
				transform: translate3d(0,-1px,0);
				
				&::before {
					--rotation: 169deg;
				}
			}
			
			&:active,
			.active {
				transform: translate3d(0,1px,0);
			}
		}
	}
}
